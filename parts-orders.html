<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–∞—Ç–∞–ª–æ–≥ –∑–∞–ø—á–∞—Å—Ç–µ–π - CarExport</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="images/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="translations.js"></script>
    <style>
        .parts-hero {
            background: linear-gradient(135deg, #0b1220 0%, #1e293b 100%);
            color: #f3f4f6;
            padding: 8rem 0 4rem 0;
            margin-top: 80px;
            border-bottom: 1px solid #1f2937;
        }
        
        .parts-hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #f9fafb;
        }
        
        .parts-hero p {
            font-size: 1.1rem;
            color: #cbd5f5;
            max-width: 800px;
            line-height: 1.6;
        }
        
        .parts-catalog {
            background: #0b1220;
            color: #e5e7eb;
            padding: 4rem 0;
            min-height: 60vh;
        }
        
        .parts-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.2rem;
            align-items: end;
            margin-bottom: 2.5rem;
            padding: 1.25rem;
            border-radius: 16px;
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(30, 41, 59, 0.85);
            box-shadow: 0 12px 28px rgba(2, 6, 23, 0.45);
        }
        
        .parts-filters .filter-group label {
            color: #cbd5f5;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .parts-filters .filter-group select,
        .parts-filters .filter-group input {
            background: #0b1220;
            border: 1px solid #1f2937;
            color: #f3f4f6;
            border-radius: 10px;
            padding: 0.65rem 0.75rem;
            width: 100%;
            box-shadow: inset 0 1px 2px rgba(15, 23, 42, 0.45);
        }
        
        .parts-filters .filter-group select:focus,
        .parts-filters .filter-group input:focus {
            border-color: rgba(212, 175, 55, 0.65);
            outline: none;
        }
        
        .brands-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .brand-card {
            background: linear-gradient(160deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.92));
            border: 1px solid rgba(148, 163, 184, 0.12);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        
        .brand-card:hover {
            transform: translateY(-4px);
            border-color: rgba(250, 204, 21, 0.35);
            box-shadow: 0 12px 32px rgba(2, 6, 23, 0.55);
        }
        
        .brand-card.active {
            border-color: rgba(212, 175, 55, 0.65);
            background: rgba(212, 175, 55, 0.1);
        }
        
        .brand-logo-container {
            position: relative;
            width: 80px;
            height: 80px;
        }
        
        .brand-logo {
            width: 80px;
            height: 80px;
            object-fit: contain;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 12px;
            padding: 0.5rem;
        }
        
        .brand-logo-fallback {
            position: absolute;
            top: 0;
            left: 0;
            width: 80px;
            height: 80px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 12px;
        }
        
        .brand-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #f9fafb;
            margin: 0;
        }
        
        .models-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.5rem;
        }
        
        .model-card {
            background: linear-gradient(160deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.92));
            border: 1px solid rgba(148, 163, 184, 0.12);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .model-card:hover {
            transform: translateY(-4px);
            border-color: rgba(250, 204, 21, 0.35);
            box-shadow: 0 12px 32px rgba(2, 6, 23, 0.55);
        }
        
        .model-image {
            width: 100%;
            height: 120px;
            object-fit: contain;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 12px;
            padding: 0.5rem;
        }
        
        .model-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #f9fafb;
            margin: 0;
            text-align: center;
        }
        
        .model-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background: rgba(212, 175, 55, 0.18);
            border: 1px solid rgba(212, 175, 55, 0.55);
            color: #facc15;
            padding: 0.6rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .model-link:hover {
            background: rgba(212, 175, 55, 0.28);
            border-color: rgba(212, 175, 55, 0.85);
        }
        
        .parts-empty-state {
            grid-column: 1 / -1;
            text-align: center;
            color: #94a3b8;
            padding: 3rem 1.5rem;
            border: 1px dashed rgba(148, 163, 184, 0.3);
            border-radius: 16px;
            background: rgba(15, 23, 42, 0.4);
        }
        
        .parts-loading {
            text-align: center;
            color: #94a3b8;
            padding: 3rem;
            font-size: 1.1rem;
        }
        
        .parts-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2.5rem;
        }
        
        .parts-stat {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid #1f2937;
            border-radius: 14px;
            padding: 1.4rem 1.6rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            box-shadow: 0 12px 32px rgba(15, 23, 42, 0.45);
        }
        
        .parts-stat-label {
            color: #9ca3af;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }
        
        .parts-stat-value {
            font-size: 1.9rem;
            font-weight: 600;
            color: #f3f4f6;
        }
        
        @media (max-width: 768px) {
            .parts-hero h1 {
                font-size: 2rem;
            }
            
            .brands-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 1rem;
            }
            
            .models-grid {
                grid-template-columns: 1fr;
            }
            
            .parts-filters {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="premium">
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="images/logo.png" alt="EXPO MIR" class="logo-img">
                    <span>EXPO MIR</span>
                </div>
                <nav class="nav">
                    <a href="index.html#catalog" data-i18n="nav_georgia">–ì—Ä—É–∑–∏—è</a>
                    <a href="usa-orders.html" data-i18n="nav_usa">–°–®–ê</a>
                    <a href="korea-orders.html" data-i18n="nav_korea">–ö–æ—Ä–µ—è</a>
                    <a href="china-orders.html" data-i18n="nav_china">–ö–∏—Ç–∞–π</a>
                    <a href="europe-orders.html" data-i18n="nav_europe">–ï–≤—Ä–æ–ø–∞</a>
                    <a href="parts-orders.html">–ó–∞–ø—á–∞—Å—Ç–∏</a>
                </nav>
                <div class="header-actions">
                    <div class="currency-selector">
                        <select id="currencySelector" class="currency-select" onchange="setCurrency(this.value)" style="background: linear-gradient(135deg, #374151 0%, #1f2937 50%, #374151 100%) !important; color: #ffffff !important; border: 1px solid rgba(255, 255, 255, 0.15) !important;">
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="KGS">—Å–æ–º</option>
                            <option value="RUB">RUB</option>
                        </select>
                    </div>
                    <div class="language-selector">
                        <select id="languageSelector" class="language-select" onchange="setLanguage(this.value)" style="background: linear-gradient(135deg, #374151 0%, #1f2937 50%, #374151 100%) !important; color: #ffffff !important; border: 1px solid rgba(255, 255, 255, 0.15) !important;">
                            <option value="ru">üá∑üá∫ RU</option>
                            <option value="en">üá¨üáß EN</option>
                            <option value="ky">üá∞üá¨ –ö–ì</option>
                        </select>
                    </div>
                    <button class="cart-btn" id="cartBtn">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </button>
                    <button class="btn-secondary" id="openRequestBtn" type="button" onclick="openRequestModal()" data-i18n="btn_request">–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥–±–æ—Ä</button>
                </div>
            </div>
        </div>
    </header>

    <section class="parts-hero">
        <div class="container">
            <h1>–ö–∞—Ç–∞–ª–æ–≥ –∞–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–µ–π</h1>
            <p>–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—á–∞—Å—Ç–∏ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –º–∞—Ä–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π. –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É, –≤—ã–±–æ—Ä –ø–æ –º–∞—Ä–∫–µ –∏ –º–æ–¥–µ–ª–∏.</p>
        </div>
    </section>

    <section class="parts-catalog">
        <div class="container">
            <div class="parts-stats" id="partsStats" aria-live="polite">
                <div class="parts-stat">
                    <span class="parts-stat-label">–ú–∞—Ä–æ–∫ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</span>
                    <span class="parts-stat-value" id="brandsCount">‚Äî</span>
                </div>
                <div class="parts-stat">
                    <span class="parts-stat-label">–ú–æ–¥–µ–ª–µ–π –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</span>
                    <span class="parts-stat-value" id="modelsCount">‚Äî</span>
                </div>
                <div class="parts-stat">
                    <span class="parts-stat-label">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
                    <span class="parts-stat-value" id="lastUpdate" style="font-size: 1.2rem;">‚Äî</span>
                </div>
            </div>

            <div class="parts-filters" aria-label="–§–∏–ª—å—Ç—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–∞">
                <div class="filter-group">
                    <label for="brandSearch">–ü–æ–∏—Å–∫ –ø–æ –º–∞—Ä–∫–µ</label>
                    <input type="text" id="brandSearch" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, Toyota">
                </div>
                <div class="filter-group">
                    <label for="modelSearch">–ü–æ–∏—Å–∫ –ø–æ –º–æ–¥–µ–ª–∏</label>
                    <input type="text" id="modelSearch" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, Camry">
                </div>
                <button class="filter-btn" id="resetFilters" type="button">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>

            <h2 style="font-size: 2rem; margin-bottom: 2rem; color: #f3f4f6;">–ú–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</h2>
            <div class="brands-grid" id="brandsGrid">
                <div class="parts-loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞...</div>
            </div>

            <div id="modelsSection" style="display: none;">
                <h2 style="font-size: 2rem; margin-bottom: 2rem; color: #f3f4f6; margin-top: 3rem;">
                    –ú–æ–¥–µ–ª–∏: <span id="selectedBrandName"></span>
                </h2>
                <div class="models-grid" id="modelsGrid">
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="contact">
        <div class="container">
            <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <h4>–¢–µ–ª–µ—Ñ–æ–Ω</h4>
                            <p>+7 (915) 444-12-08</p>
                            <p>+7 (918) 414-06-36</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h4>Email</h4>
                            <p>carexportgeo@bk.ru</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-telegram"></i>
                        <div>
                            <h4>Telegram</h4>
                            <p><a href="https://t.me/Aleksandr_N_444" target="_blank">@Aleksandr_N_444</a></p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-whatsapp"></i>
                        <div>
                            <h4>WhatsApp</h4>
                            <p><a href="https://wa.me/79184140636" target="_blank">+7-918-414-06-36</a></p>
                        </div>
                    </div>
                </div>
                <div class="contact-form">
                    <h3>–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</h3>
                    <form id="contactForm">
                        <input type="text" placeholder="–í–∞—à–µ –∏–º—è" required>
                        <input type="tel" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
                        <input type="email" placeholder="Email">
                        <textarea placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ"></textarea>
                        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>CarExport</h4>
                    <p>–ö–∞—Ç–∞–ª–æ–≥ –∞–≤—Ç–æ–∑–∞–ø—á–∞—Å—Ç–µ–π —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏</p>
                </div>
                <div class="footer-section">
                    <h4>–£—Å–ª—É–≥–∏</h4>
                    <ul>
                        <li>–ü–æ–∏—Å–∫ –∑–∞–ø—á–∞—Å—Ç–µ–π –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É</li>
                        <li>–ü–æ–¥–±–æ—Ä –ø–æ –º–∞—Ä–∫–µ –∏ –º–æ–¥–µ–ª–∏</li>
                        <li>–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –†–æ—Å—Å–∏–∏</li>
                        <li>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <p>+7 (915) 444-12-08</p>
                    <p>+7 (918) 414-06-36</p>
                    <p>carexportgeo@bk.ru</p>
                </div>
                <div class="footer-section">
                    <h4>–°–æ—Ü—Å–µ—Ç–∏</h4>
                    <p><a href="https://t.me/Aleksandr_N_444" target="_blank">Telegram</a></p>
                    <p><a href="https://wa.me/79184140636" target="_blank">WhatsApp</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© 2024 CarExport. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞ –∑–∞–ø—á–∞—Å—Ç–µ–π
        (async function() {
            const brandsGrid = document.getElementById('brandsGrid');
            const modelsSection = document.getElementById('modelsSection');
            const modelsGrid = document.getElementById('modelsGrid');
            const selectedBrandName = document.getElementById('selectedBrandName');
            const brandsCount = document.getElementById('brandsCount');
            const modelsCount = document.getElementById('modelsCount');
            const lastUpdate = document.getElementById('lastUpdate');
            const brandSearch = document.getElementById('brandSearch');
            const modelSearch = document.getElementById('modelSearch');
            const resetFilters = document.getElementById('resetFilters');
            
            let catalogData = null;
            let selectedBrand = null;
            
            try {
                const response = await fetch('images/partsouq/parts_catalog.json');
                if (!response.ok) throw new Error('Failed to load parts catalog');
                catalogData = await response.json();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                const totalModels = catalogData.brands.reduce((sum, b) => sum + (b.models?.length || 0), 0);
                brandsCount.textContent = catalogData.brands.length;
                modelsCount.textContent = totalModels;
                if (catalogData.last_updated) {
                    lastUpdate.textContent = new Date(catalogData.last_updated).toLocaleDateString('ru-RU');
                }
                
                renderBrands(catalogData.brands);
            } catch (error) {
                console.error('Error loading parts catalog:', error);
                brandsGrid.innerHTML = '<div class="parts-empty-state">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.</div>';
            }
            
            function renderBrands(brands) {
                if (!brands || brands.length === 0) {
                    brandsGrid.innerHTML = '<div class="parts-empty-state">–ö–∞—Ç–∞–ª–æ–≥ –ø—É—Å—Ç. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.</div>';
                    return;
                }
                
                brandsGrid.innerHTML = brands.map(brand => {
                    const logoContainer = brand.logo ? 
                        `<div class="brand-logo-container">
                            <img src="${brand.logo}" alt="${brand.name}" class="brand-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div class="brand-logo-fallback" style="display: none; align-items: center; justify-content: center; color: #9ca3af; width: 80px; height: 80px;"><i class="fas fa-car" style="font-size: 2rem;"></i></div>
                        </div>` : 
                        `<div class="brand-logo" style="display: flex; align-items: center; justify-content: center; color: #9ca3af;"><i class="fas fa-car" style="font-size: 2rem;"></i></div>`;
                    
                    return `
                        <div class="brand-card" data-brand-slug="${brand.slug}" onclick="selectBrand('${brand.slug}')">
                            ${logoContainer}
                            <h3 class="brand-name">${brand.name}</h3>
                            ${brand.models && brand.models.length > 0 ? `<span style="color: #9ca3af; font-size: 0.9rem;">${brand.models.length} –º–æ–¥–µ–ª–µ–π</span>` : ''}
                        </div>
                    `;
                }).join('');
            }
            
            function renderModels(brand) {
                if (!brand || !brand.models || brand.models.length === 0) {
                    modelsGrid.innerHTML = '<div class="parts-empty-state">–ú–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                    return;
                }
                
                selectedBrandName.textContent = brand.name;
                modelsSection.style.display = 'block';
                
                modelsGrid.innerHTML = brand.models.map(model => {
                    const image = model.image_url ? 
                        `<img src="${model.image_url}" alt="${model.name}" class="model-image" onerror="this.style.display='none'">` :
                        `<div class="model-image" style="display: flex; align-items: center; justify-content: center; color: #9ca3af;"><i class="fas fa-car" style="font-size: 3rem;"></i></div>`;
                    
                    return `
                        <div class="model-card">
                            ${image}
                            <h3 class="model-name">${model.name}</h3>
                            <a href="${model.url}" target="_blank" class="model-link">
                                <i class="fas fa-external-link-alt"></i>
                                –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥
                            </a>
                        </div>
                    `;
                }).join('');
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Å–µ–∫—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π
                modelsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            window.selectBrand = function(slug) {
                if (!catalogData) return;
                
                const brand = catalogData.brands.find(b => b.slug === slug);
                if (!brand) return;
                
                selectedBrand = brand;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –º–∞—Ä–∫—É
                document.querySelectorAll('.brand-card').forEach(card => {
                    card.classList.remove('active');
                });
                document.querySelector(`[data-brand-slug="${slug}"]`).classList.add('active');
                
                renderModels(brand);
            };
            
            // –ü–æ–∏—Å–∫ –ø–æ –º–∞—Ä–∫–∞–º
            brandSearch.addEventListener('input', function() {
                if (!catalogData) return;
                
                const searchTerm = this.value.toLowerCase().trim();
                if (!searchTerm) {
                    renderBrands(catalogData.brands);
                    return;
                }
                
                const filtered = catalogData.brands.filter(b => 
                    b.name.toLowerCase().includes(searchTerm)
                );
                renderBrands(filtered);
            });
            
            // –ü–æ–∏—Å–∫ –ø–æ –º–æ–¥–µ–ª—è–º
            modelSearch.addEventListener('input', function() {
                if (!catalogData || !selectedBrand) return;
                
                const searchTerm = this.value.toLowerCase().trim();
                if (!searchTerm) {
                    renderModels(selectedBrand);
                    return;
                }
                
                const filteredModels = selectedBrand.models.filter(m => 
                    m.name.toLowerCase().includes(searchTerm)
                );
                
                if (filteredModels.length === 0) {
                    modelsGrid.innerHTML = '<div class="parts-empty-state">–ú–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                } else {
                    const brandCopy = { ...selectedBrand, models: filteredModels };
                    renderModels(brandCopy);
                }
            });
            
            // –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤
            resetFilters.addEventListener('click', function() {
                brandSearch.value = '';
                modelSearch.value = '';
                selectedBrand = null;
                modelsSection.style.display = 'none';
                document.querySelectorAll('.brand-card').forEach(card => {
                    card.classList.remove('active');
                });
                if (catalogData) {
                    renderBrands(catalogData.brands);
                }
            });
        })();
    </script>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑ script.js) -->
    <div id="cartModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–í–∞—à –∑–∞–∫–∞–∑</h3>
                <span class="close" onclick="closeCart()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="cartBody"></div>
            </div>
            <div class="modal-footer">
                <div class="cart-summary">
                    <span>–ò—Ç–æ–≥–æ: <strong id="cartTotal">0</strong> ‚ÇΩ</span>
                </div>
                <button class="btn-primary" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </div>
        </div>
    </div>

    <div id="customsModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–¢–∞–º–æ–∂–µ–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h3>
                <span class="close" onclick="closeCustomsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="customs-content">
                    <form id="customsForm" class="calc-form" onsubmit="return false;">
                        <div class="calc-row">
                            <label for="costUsd">–°—Ç–æ–∏–º–æ—Å—Ç—å (USD)</label>
                            <input type="number" id="costUsd" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 25000" min="0" step="0.01" required>
                        </div>
                        <div class="calc-row">
                            <label for="engineCc">–û–±—ä–µ–º, —Å–º¬≥</label>
                            <input type="number" id="engineCc" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 1998" min="0" step="1" required>
                        </div>
                        <div class="calc-row">
                            <label for="age">–í–æ–∑—Ä–∞—Å—Ç</label>
                            <input id="age" value="3 - 5 –ª–µ—Ç" disabled>
                        </div>
                        <div class="calc-actions">
                            <button class="btn-primary" id="calcBtn" type="button">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                        </div>
                    </form>
                    <div class="calc-result" id="calcResult" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="requestModal" class="modal" style="display:none;">
        <div class="modal-content" style="max-width:600px;">
            <div class="modal-header">
                <h3>–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥–±–æ—Ä</h3>
                <span class="close" onclick="closeRequestModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="request-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="reqBrand">–ú–∞—Ä–∫–∞*</label>
                            <input type="text" id="reqBrand" required>
                        </div>
                        <div class="form-group">
                            <label for="reqModel">–ú–æ–¥–µ–ª—å*</label>
                            <input type="text" id="reqModel" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="reqYearFrom">–ì–æ–¥ –æ—Ç</label>
                            <input type="number" id="reqYearFrom" min="1990" max="2025">
                        </div>
                        <div class="form-group">
                            <label for="reqYearTo">–ì–æ–¥ –¥–æ</label>
                            <input type="number" id="reqYearTo" min="1990" max="2025">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="reqPriceTo">–ë—é–¥–∂–µ—Ç –¥–æ, ‚ÇΩ</label>
                        <input type="number" id="reqPriceTo" min="0">
                    </div>
                    <div class="form-group">
                        <label for="reqName">–í–∞—à–µ –∏–º—è*</label>
                        <input type="text" id="reqName" required>
                    </div>
                    <div class="form-group">
                        <label for="reqPhone">–¢–µ–ª–µ—Ñ–æ–Ω*</label>
                        <input type="tel" id="reqPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="reqEmail">Email</label>
                        <input type="email" id="reqEmail">
                    </div>
                    <div class="form-group">
                        <label for="reqNote">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                        <textarea id="reqNote" rows="4"></textarea>
                    </div>
                    <div id="requestStatus" style="display:none;color:#facc15;margin-bottom:1rem;"></div>
                    <button class="btn-primary" id="requestSubmit" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div id="selfCalcModal" class="modal" style="display:none;">
        <div class="modal-content" style="max-width:600px;">
            <div class="modal-header">
                <h3>–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å—á–µ—Ç</h3>
                <span class="close" onclick="closeSelfCalcModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="calc-form">
                    <div class="calc-row">
                        <label for="selfCostUsd">–°—Ç–æ–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ (USD)</label>
                        <input type="number" id="selfCostUsd" min="0" step="0.01" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 22000">
                    </div>
                    <div class="calc-row">
                        <label for="selfEngineCc">–û–±—ä–µ–º –¥–≤–∏–≥–∞—Ç–µ–ª—è, —Å–º¬≥</label>
                        <input type="number" id="selfEngineCc" min="0" step="1" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 1998">
                    </div>
                    <button class="btn-primary" id="selfCalcBtn" type="button">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                    <div class="calc-result" id="selfCalcResult" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

