<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ –∏–∑ –ì—Ä—É–∑–∏–∏</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="premium-enhancements.css">
    <link rel="icon" type="image/png" href="images/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="translations.js"></script>
</head>
<body class="premium">
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="images/logo.png" alt="EXPO MIR" class="logo-img">
                    <span>EXPO MIR</span>
                </div>
                <nav class="nav">
                    <a href="index.html#catalog" data-i18n="nav_georgia">–ì—Ä—É–∑–∏—è</a>
                    <a href="usa-orders.html" data-i18n="nav_usa">–°–®–ê</a>
                    <a href="korea-orders.html" data-i18n="nav_korea">–ö–æ—Ä–µ—è</a>
                    <a href="china-orders.html" data-i18n="nav_china">–ö–∏—Ç–∞–π</a>
                    <a href="europe-orders.html" data-i18n="nav_europe">–ï–≤—Ä–æ–ø–∞</a>
                    <a href="parts-orders.html">–ó–∞–ø—á–∞—Å—Ç–∏</a>
                </nav>
                <div class="header-actions">
                    <div class="currency-selector">
                        <select id="currencySelector" class="currency-select" onchange="setCurrency(this.value)">
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="KGS">—Å–æ–º</option>
                            <option value="RUB">RUB</option>
                        </select>
                    </div>
                    <div class="language-selector">
                        <select id="languageSelector" class="language-select" onchange="setLanguage(this.value)">
                            <option value="ru">RU</option>
                            <option value="en">EN</option>
                            <option value="ky">–ö–ì</option>
                        </select>
                    </div>
                    <button class="cart-btn" id="cartBtn">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </button>
                    <button class="btn-secondary" id="openRequestBtn" type="button" onclick="openRequestModal()" data-i18n="btn_request">–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥–±–æ—Ä</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1 data-i18n="hero_title">–ì—Ä—É–∑–∏—è –∞–≤—Ç–æ –≤ –Ω–∞–ª–∏—á–∏–∏</h1>
                <p class="hero-tagline" data-i18n="hero_tagline">–®–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä<br>–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π<br>—Å –ø—Ä–æ–±–µ–≥–æ–º.</p>
                <div class="hero-features">
                    <div class="feature">
                        <i class="fas fa-truck"></i>
                        <span data-i18n="hero_delivery">–î–æ—Å—Ç–∞–≤–∫–∞</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-file-contract"></i>
                        <span data-i18n="hero_registration">–ü–æ–ª–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</span>
                    </div>
                </div>
                <button class="cta-btn" onclick="document.getElementById('catalog').scrollIntoView()" data-i18n="hero_view_catalog">
                    –°–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥
                </button>
            </div>
        </div>
    </section>

    <!-- USA Orders CTA -->
    <section class="orders-cta">
        <div class="container">
            <div class="orders-cta-content">
                <div>
                    <h2 data-i18n="cta_usa_title">–ó–∞–∫–∞–∑ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ –°–®–ê</h2>
                    <p data-i18n="cta_usa_text">–í—ã–±–∏—Ä–∞–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –Ω–∞ Copart, IAAI –∏ Manheim, –¥–æ—Å—Ç–∞–≤–ª—è–µ–º –≤ –ì—Ä—É–∑–∏—é. –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Å –ª–æ—Ç–∞–º–∏ –∏ –ø–æ–¥–±–æ—Ä–æ–º –ø–æ VIN –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</p>
                </div>
                <a class="btn-primary" href="usa-orders.html" data-i18n="cta_usa_link">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ –°–®–ê</a>
            </div>
        </div>
    </section>

    <!-- China Orders CTA -->
    <section class="orders-cta" style="background:#111827;">
        <div class="container">
            <div class="orders-cta-content">
                <div>
                    <h2 data-i18n="cta_china_title">–ó–∞–∫–∞–∑ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ –ö–∏—Ç–∞—è</h2>
                    <p data-i18n="cta_china_text">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ –ö–ù–†: –∑–∞–≤–æ–¥—Å–∫–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏, –≥–∞—Ä–∞–Ω—Ç–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è. –£–∑–Ω–∞–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏.</p>
                </div>
                <a class="btn-primary" href="china-orders.html" data-i18n="cta_china_link">–ö–∞—Ç–∞–ª–æ–≥ –∏–∑ –ö–∏—Ç–∞—è</a>
            </div>
        </div>
    </section>

    <!-- Korea Orders CTA -->
    <section class="orders-cta" style="background:#0d1320;">
        <div class="container">
            <div class="orders-cta-content">
                <div>
                    <h2 data-i18n="cta_korea_title">–ó–∞–∫–∞–∑ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ –ö–æ—Ä–µ–∏</h2>
                    <p data-i18n="cta_korea_text">–°–≤–µ–∂–∏–µ Hyundai, Kia –∏ Genesis —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π —Å–µ—Ä–≤–∏—Å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –≤ –ö–æ—Ä–µ–µ. –î–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏, –ø—Ä–æ–±–µ–≥–∏ –¥–æ 30 —Ç—ã—Å. –∫–º –∏ –ø–æ—Å—Ç–∞–≤–∫–∞ ¬´–ø–æ–¥ –∫–ª—é—á¬ª.</p>
                </div>
                <a class="btn-primary" href="korea-orders.html" data-i18n="cta_korea_link">–ö–∞—Ç–∞–ª–æ–≥ –∏–∑ –ö–æ—Ä–µ–∏</a>
            </div>
        </div>
    </section>

    <!-- Europe Orders CTA -->
    <section class="orders-cta" style="background:#1a1f2e;">
        <div class="container">
            <div class="orders-cta-content">
                <div>
                    <h2 data-i18n="cta_europe_title">–ó–∞–∫–∞–∑ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ –ï–≤—Ä–æ–ø—ã</h2>
                    <p data-i18n="cta_europe_text">–®–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ –ì–µ—Ä–º–∞–Ω–∏–∏, –§—Ä–∞–Ω—Ü–∏–∏, –ò—Ç–∞–ª–∏–∏ –∏ –¥—Ä—É–≥–∏—Ö –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∏–ª–µ—Ä—ã, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è, –¥–æ—Å—Ç–∞–≤–∫–∞ –∏ —Ä–∞—Å—Ç–∞–º–æ–∂–∫–∞.</p>
                </div>
                <a class="btn-primary" href="europe-orders.html" data-i18n="cta_europe_link">–ö–∞—Ç–∞–ª–æ–≥ –∏–∑ –ï–≤—Ä–æ–ø—ã</a>
            </div>
        </div>
    </section>

    <!-- Customs Calculator Modal -->
    <div id="customsModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–¢–∞–º–æ–∂–µ–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h3>
                <span class="close" onclick="closeCustomsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="customs-content">
                    <form id="customsForm" class="calc-form" onsubmit="return false;">
                        <div class="calc-row">
                            <label for="costUsd">–°—Ç–æ–∏–º–æ—Å—Ç—å (USD)</label>
                            <input type="number" id="costUsd" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 25000" min="0" step="0.01" required>
                        </div>
                        <div class="calc-row">
                            <label for="engineCc">–û–±—ä–µ–º, —Å–º¬≥</label>
                            <input type="number" id="engineCc" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 1998" min="0" step="1" required>
                        </div>
                        <div class="calc-row">
                            <label for="age">–í–æ–∑—Ä–∞—Å—Ç</label>
                            <input id="age" value="3 - 5 –ª–µ—Ç" disabled>
                        </div>
                        <div class="calc-actions">
                            <button class="btn-primary" id="calcBtn" type="button">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                        </div>
                    </form>
                    <div class="calc-result" id="calcResult" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Catalog Section -->
    <section id="catalog" class="catalog">
        <div class="container">
            <h2 data-i18n="catalog_title">–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ –≤ –ì—Ä—É–∑–∏–∏ –≤ –Ω–∞–ª–∏—á–∏–∏</h2>
            <div class="catalog-filters">
                <div class="filter-group">
                    <label data-i18n="catalog_brand">–ú–∞—Ä–∫–∞:</label>
                    <select id="brandFilter">
                        <option value="" data-i18n="filter_all_brands">–í—Å–µ –º–∞—Ä–∫–∏</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label data-i18n="catalog_model">–ú–æ–¥–µ–ª—å:</label>
                    <select id="modelFilter">
                        <option value="" data-i18n="filter_all_models">–í—Å–µ –º–æ–¥–µ–ª–∏</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label data-i18n="catalog_price_from">–¶–µ–Ω–∞ –æ—Ç:</label>
                    <input type="number" id="priceFrom" data-i18n-placeholder="catalog_minimum" placeholder="–ú–∏–Ω–∏–º—É–º">
                </div>
                <div class="filter-group">
                    <label data-i18n="catalog_price_to">–¶–µ–Ω–∞ –¥–æ:</label>
                    <input type="number" id="priceTo" data-i18n-placeholder="catalog_maximum" placeholder="–ú–∞–∫—Å–∏–º—É–º">
                </div>
                <div class="filter-group">
                    <label data-i18n="catalog_mileage_to">–ü—Ä–æ–±–µ–≥ –¥–æ:</label>
                    <input type="number" id="mileageTo" data-i18n-placeholder="catalog_km" placeholder="–∫–º">
                </div>
                <button class="filter-btn" id="applyFilters" data-i18n="btn_apply">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                <button class="filter-btn" id="resetFilters" data-i18n="btn_reset">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>
            <div class="cars-grid" id="carsGrid">
                <!-- Cars will be loaded here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <h4>–¢–µ–ª–µ—Ñ–æ–Ω</h4>
                            <p><a href="tel:+996755666805">+996 755 666 805</a></p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <h4>Email</h4>
                            <p><a href="mailto:carexportgeo@bk.ru">carexportgeo@bk.ru</a></p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-whatsapp"></i>
                        <div>
                            <h4>WhatsApp</h4>
                            <p><a href="https://wa.me/996755666805" target="_blank">+996 755 666 805</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>EXPO MIR</h4>
                    <p>–ù–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä—Ç–Ω–µ—Ä –≤ –ø–æ–∫—É–ø–∫–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ –ì—Ä—É–∑–∏–∏</p>
                </div>
                <div class="footer-section">
                    <h4>–£—Å–ª—É–≥–∏</h4>
                    <ul>
                        <li>–ü—Ä–æ–¥–∞–∂–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</li>
                        <li>–†–∞—Å—Ç–∞–º–æ–∂–∫–∞</li>
                        <li>–î–æ—Å—Ç–∞–≤–∫–∞</li>
                        <li>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <p><a href="tel:+996755666805">+996 755 666 805</a></p>
                    <p><a href="mailto:carexportgeo@bk.ru">carexportgeo@bk.ru</a></p>
                    <p><a href="https://wa.me/996755666805" target="_blank">WhatsApp: +996 755 666 805</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 EXPO MIR. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–í–∞—à –∑–∞–∫–∞–∑</h3>
                <span class="close" onclick="closeCart()">&times;</span>
            </div>
            <div class="modal-body" id="cartBody">
                <!-- Cart items will be loaded here -->
            </div>
            <div class="modal-footer">
                <div class="cart-total">
                    <strong>–ò—Ç–æ–≥–æ: <span id="cartTotal">0</span> $</strong>
                </div>
                <button class="checkout-btn" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </div>
        </div>
    </div>

    <!-- Checkout Contact Modal -->
    <div id="checkoutModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="closeCheckoutModal()">&times;</span>
            <h3 style="margin-top:0;">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</h3>
            <form id="checkoutContactForm" style="display:flex; flex-direction:column; gap:12px;">
                <input type="text" id="contactName" placeholder="–í–∞—à–µ –∏–º—è" required>
                <input type="tel" id="contactPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
                <input type="email" id="contactEmail" placeholder="Email" required>
                <button type="submit" class="btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
                <button type="button" class="btn-secondary" onclick="closeCheckoutModal()">–û—Ç–º–µ–Ω–∞</button>
            </form>
            <p style="color:#9ca3af; font-size:0.9rem;">–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.</p>
        </div>
    </div>

    <!-- Self Service Modal -->
    <div id="selfCalcModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–í—ã –º–æ–∂–µ—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å –Ω–∞ —Å–∞–π—Ç–∞—Ö –≤ –ì—Ä—É–∑–∏–∏, –º—ã –µ–≥–æ –ø—Ä–æ–≤–µ—Ä–∏–º, –ø—Ä–∏–≤–µ–∑–µ–º –∫ –≤–∞–º –∏ —Ä–∞—Å—Ç–∞–º–æ–∂–∏–º.</h3>
                <span class="close" onclick="closeSelfCalcModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="customs-content">
                    <p style="margin-bottom:1rem; color:#9ca3af;">
                        –°–∞–π—Ç—ã: <a href="https://ap.ge/ru/usd" target="_blank">ap.ge</a>, 
                        <a href="https://myauto.ge/ru" target="_blank">myauto.ge</a>
                    </p>
                    <form id="selfCalcForm" class="calc-form" onsubmit="return false;">
                        <div class="calc-row">
                            <label for="selfCostUsd">–°—Ç–æ–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ –≤ –ì—Ä—É–∑–∏–∏ (USD)</label>
                            <input type="number" id="selfCostUsd" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 12000" min="0" step="0.01" required>
                        </div>
                        <div class="calc-row">
                            <label for="selfEngineCc">–û–±—ä–µ–º –¥–≤–∏–≥–∞—Ç–µ–ª—è, —Å–º¬≥</label>
                            <input type="number" id="selfEngineCc" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 1998" min="0" step="1" required>
                        </div>
                        <div class="calc-actions">
                            <button class="btn-primary" id="selfCalcBtn" type="button">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                        </div>
                    </form>
                    <div class="calc-result" id="selfCalcResult" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Request Modal -->
    <div id="requestModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥–±–æ—Ä</h3>
                <span class="close" onclick="closeRequestModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="requestForm" class="calc-form request-form" onsubmit="return false;">
                    <div class="calc-row">
                        <label for="reqBrand">–ú–∞—Ä–∫–∞</label>
                        <input id="reqBrand" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, Toyota" required>
                    </div>
                    <div class="calc-row">
                        <label for="reqModel">–ú–æ–¥–µ–ª—å</label>
                        <input id="reqModel" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, Camry" required>
                    </div>
                    <div class="calc-row">
                        <label for="reqYearFrom">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ (–æ—Ç)</label>
                        <input type="number" id="reqYearFrom" placeholder="2018" min="1990" max="2100">
                    </div>
                    <div class="calc-row">
                        <label for="reqYearTo">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ (–¥–æ)</label>
                        <input type="number" id="reqYearTo" placeholder="2024" min="1990" max="2100">
                    </div>
                    <div class="calc-row">
                        <label for="reqPriceTo">–°—Ç–æ–∏–º–æ—Å—Ç—å (–¥–æ), $</label>
                        <input type="number" id="reqPriceTo" placeholder="3000000" min="0" step="1000">
                    </div>
                    <div class="calc-row calc-row--full">
                        <label for="reqNote">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</label>
                        <textarea id="reqNote" rows="4" placeholder="–ü–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏, —Ü–≤–µ—Ç—É –∏ —Ç.–¥."></textarea>
                    </div>
                    <div class="calc-row calc-row--full">
                        <div class="request-form__contacts">
                            <div class="request-form__field">
                            <label for="reqName">–í–∞—à–µ –∏–º—è</label>
                            <input id="reqName" placeholder="–ò–≤–∞–Ω" required>
                        </div>
                            <div class="request-form__field">
                            <label for="reqPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input id="reqPhone" placeholder="+7..." required>
                        </div>
                            <div class="request-form__field">
                            <label for="reqEmail">Email</label>
                            <input type="email" id="reqEmail" placeholder="you@example.com">
                            </div>
                        </div>
                    </div>
                    <div class="calc-actions calc-actions--full">
                        <button class="btn-primary" id="requestSubmit" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø–æ–¥–±–æ—Ä</button>
                    </div>
                </form>
                <div id="requestStatus" class="calc-result" style="display:none;"></div>
            </div>
        </div>
    </div>

    <!-- Hidden email form (fallback via formsubmit.co) -->
    <form id="emailFallbackForm" action="https://formsubmit.co/carexportgeo@bk.ru" method="POST" style="display:none;">
        <input type="hidden" name="name" id="fs_name">
        <input type="hidden" name="phone" id="fs_phone">
        <input type="hidden" name="email" id="fs_email">
        <input type="hidden" name="message" id="fs_message">
        <!-- Disable Captcha and redirect back to site -->
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_subject" value="–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞ EXPO MIR">
    </form>

    <!-- Car Details Modal -->
    <div id="carModal" class="modal">
        <div class="modal-content car-modal">
            <div class="modal-header">
                <h3 id="carModalTitle"></h3>
                <span class="close" onclick="closeCarModal()">&times;</span>
            </div>
            <div class="modal-body" id="carModalBody">
                <!-- Car details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>

    <aside class="floating-subscribe" aria-label="–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Telegram">
        <div class="floating-subscribe__inner">
            <span class="floating-subscribe__title"><i class="fab fa-telegram"></i> –ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –Ω–∞—Å –≤ Telegram</span>
            <a class="floating-subscribe__link" href="https://t.me/expo_mir" target="_blank" rel="noopener">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–Ω–∞–ª</a>
            <button class="floating-subscribe__close" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ">&times;</button>
        </div>
    </aside>

    <script>
        (function(){
            const widget = document.querySelector('.floating-subscribe');
            if (!widget) return;
            const closeBtn = widget.querySelector('.floating-subscribe__close');
            if (closeBtn) {
                closeBtn.addEventListener('click', function(){
                    widget.classList.add('floating-subscribe--hidden');
                    localStorage.setItem('ce_subscribe_closed', '1');
                });
            }
            if (localStorage.getItem('ce_subscribe_closed') === '1') {
                widget.classList.add('floating-subscribe--hidden');
            }
        })();
    </script>

    <!-- Script for loading Georgia stock cars -->
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ì—Ä—É–∑–∏–∏
        let georgiaCarsData = [];
        let georgiaFilteredCars = [];
        let georgiaUsdToRubRate = null;

        // –ö—ç—à DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        const georgiaDomCache = {};
        function getGeorgiaElement(id) {
            if (!georgiaDomCache[id]) {
                georgiaDomCache[id] = document.getElementById(id);
            }
            return georgiaDomCache[id];
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–∞ USD/RUB
        async function loadGeorgiaUsdToRubRate() {
            if (georgiaUsdToRubRate) return georgiaUsdToRubRate;
            try {
                const response = await fetch('https://www.cbr-xml-daily.ru/daily_json.js');
                if (response.ok) {
                    const data = await response.json();
                    const usdRate = data.Valute?.USD;
                    if (usdRate && usdRate.Value) {
                        georgiaUsdToRubRate = usdRate.Value;
                        return georgiaUsdToRubRate;
                    }
                }
            } catch (error) {
                console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫—É—Ä—Å –¶–ë');
            }
            georgiaUsdToRubRate = 92.0;
            return georgiaUsdToRubRate;
        }

        // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ä—É–±–ª–µ–π –≤ –¥–æ–ª–ª–∞—Ä—ã
        function convertRubToUsd(rubValue) {
            if (!georgiaUsdToRubRate) return rubValue;
            return Math.round(rubValue / georgiaUsdToRubRate);
        }

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–Ω–æ–π –≤ —Ä—É–±–ª—è—Ö
        function isPriceInRubles(value, currency) {
            if (currency === 'USD' || currency === 'EUR' || currency === 'GEL') {
                return false;
            }
            return false; // –î–ª—è –ì—Ä—É–∑–∏–∏ —Ü–µ–Ω—ã —É–∂–µ –≤ USD
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function filterGeorgiaImages(images) {
            if (!images) return [];
            return images.filter(img => {
                const url = typeof img === 'string' ? img : (img.url || '');
                if (!url) return false;
                const u = url.toLowerCase();
                const excludeKeywords = ['logo', 'icon', 'favicon'];
                return !excludeKeywords.some(keyword => u.includes(keyword));
            });
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–¥–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
        function getGeorgiaCarYear(car) {
            if (car.year) return car.year;
            if (car.url) {
                const yearMatch = car.url.match(/-(\d{4})/);
                if (yearMatch) {
                    const year = parseInt(yearMatch[1]);
                    if (year >= 1990 && year <= new Date().getFullYear() + 1) {
                        return year;
                    }
                }
            }
            return null;
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≥–∞–ª–µ—Ä–µ–µ
        window.changeCarImage = function(carId, direction) {
            const carImageContainer = document.querySelector(`.car-image[data-car-id="${carId}"]`);
            if (!carImageContainer) {
                console.warn('Car image container not found:', carId);
                return;
            }
            
            const images = carImageContainer.querySelectorAll('.car-gallery-img');
            if (images.length <= 1) {
                return;
            }
            
            let currentIndex = -1;
            images.forEach((img, idx) => {
                if (img.classList.contains('active')) {
                    currentIndex = idx;
                }
            });
            
            if (currentIndex === -1) {
                images[0].classList.add('active');
                images[0].style.display = 'block';
                return;
            }
            
            images[currentIndex].classList.remove('active');
            images[currentIndex].style.display = 'none';
            
            let newIndex = currentIndex + direction;
            if (newIndex < 0) {
                newIndex = images.length - 1;
            } else if (newIndex >= images.length) {
                newIndex = 0;
            }
            
            images[newIndex].classList.add('active');
            images[newIndex].style.display = 'block';
            
            if (images[newIndex].getAttribute('loading') === 'lazy') {
                images[newIndex].setAttribute('loading', 'eager');
            }
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å—Ç—Ä–µ–ª–∫–∞–º–∏
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                const focusedCard = document.querySelector('.car-card:hover, .car-card:focus-within');
                if (focusedCard) {
                    const carImage = focusedCard.querySelector('.car-image');
                    if (carImage) {
                        const carId = carImage.getAttribute('data-car-id');
                        if (carId) {
                            const direction = e.key === 'ArrowLeft' ? -1 : 1;
                            changeCarImage(carId, direction);
                            e.preventDefault();
                        }
                    }
                }
            }
        });
        
        function displayGeorgiaCars() {
            const grid = getGeorgiaElement('carsGrid');
            if (!grid) return;
            
            if (georgiaFilteredCars.length === 0) {
                grid.innerHTML = '<div class="no-results">–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }

            grid.innerHTML = georgiaFilteredCars.map((car, index) => {
                const images = filterGeorgiaImages(car.images);
                const firstImage = images.length > 0 ? images[0].url : '';
                const imageCount = images.length;
                
                let displayPrice = car.price;
                let currency = car.price_currency || 'USD';
                
                if (isPriceInRubles(car.price, currency) && georgiaUsdToRubRate) {
                    displayPrice = convertRubToUsd(car.price);
                    currency = 'USD';
                }
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º formatPrice –∏–∑ translations.js –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∞–ª—é—Ç—É
                const price = displayPrice ? (typeof formatPrice === 'function' ? formatPrice(displayPrice) : `$${displayPrice.toLocaleString('ru-RU')}`) : (typeof translations !== 'undefined' && translations[currentLanguage] ? translations[currentLanguage].price_on_request : '–¶–µ–Ω–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É');
                
                // –î–æ–±–∞–≤–ª—è–µ–º 5690 –¥–æ–ª–ª–∞—Ä–æ–≤ –∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –∏ —Ä–∞—Å—Ç–∞–º–æ–∂–∫–æ–π
                const fullPrice = displayPrice ? displayPrice + 5690 : null;
                const fullPriceFormatted = fullPrice ? (typeof formatPrice === 'function' ? formatPrice(fullPrice) : `$${fullPrice.toLocaleString('ru-RU')}`) : '';
                
                const year = getGeorgiaCarYear(car);
                const yearDisplay = year ? ` ${year}` : '';
                
                const placeholderSvg = 'data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27300%27 height=%27200%27%3E%3Crect fill=%27%23ddd%27 width=%27300%27 height=%27200%27/%3E%3Ctext x=%2750%25%27 y=%2750%25%27 text-anchor=%27middle%27 dy=%27.3em%27 fill=%27%23999%27%3E%D0%9D%D0%B5%D1%82 %D1%84%D0%BE%D1%82%D0%BE%3C/text%3E%3C/svg%3E';
                
                const carId = `car-${index}`;
                const imagesHtml = images.length > 0 ? images.map((img, imgIdx) => 
                    `<img class="car-gallery-img ${imgIdx === 0 ? 'active' : ''}" 
                          src="${img.url.replace(/"/g, '&quot;').replace(/'/g, '&#39;')}" 
                          alt="${(car.brand + ' ' + car.model + yearDisplay).replace(/"/g, '&quot;').replace(/'/g, '&#39;')}" 
                          data-index="${imgIdx}"
                          loading="${imgIdx === 0 ? 'eager' : 'lazy'}"
                          onload="this.classList.add('loaded')"
                          onerror="this.onerror=null;this.src=&quot;${placeholderSvg}&quot;">`
                ).join('') : `<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#9ca3af;">–ù–µ—Ç —Ñ–æ—Ç–æ</div>`;
                
                return `
                    <div class="car-card" data-index="${index}">
                        <div class="car-image" data-car-id="${carId}">
                            <div class="car-gallery-container">
                                ${imagesHtml}
                            </div>
                            ${imageCount > 1 ? `
                                <button class="gallery-arrow gallery-arrow-prev" onclick="changeCarImage('${carId}', -1)" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="gallery-arrow gallery-arrow-next" onclick="changeCarImage('${carId}', 1)" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            ` : ''}
                            ${imageCount > 0 ? `<div class="image-count">${imageCount} —Ñ–æ—Ç–æ</div>` : ''}
                        </div>
                        <div class="car-info">
                            <div class="car-title">${car.brand} ${car.model}${yearDisplay}</div>
                            <div class="car-price">${price}</div>
                            ${fullPrice ? `<div class="car-price-full">
                                <span class="car-price-full-label" data-i18n="catalog_price_with_delivery">–°—Ç–æ–∏–º–æ—Å—Ç—å —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –∏ —Ä–∞—Å—Ç–∞–º–æ–∂–∫–æ–π:</span>
                                <span class="car-price-full-value">${fullPriceFormatted}</span>
                            </div>` : ''}
                            <div class="car-specs">
                                ${year ? `<div class="car-spec-item">üìÖ ${year} –≥–æ–¥</div>` : ''}
                                ${car.mileage ? `<div class="car-spec-item">üìè ${car.mileage.toLocaleString('ru-RU')} –∫–º</div>` : ''}
                                ${car.transmission ? `<div class="car-spec-item">‚öôÔ∏è ${car.transmission}</div>` : ''}
                                ${car.vin && car.vin.trim() ? `<div class="car-spec-item">üîë VIN: <a href="https://www.google.com/search?q=${encodeURIComponent(car.vin.trim())}" target="_blank" rel="noopener noreferrer" style="color: #60a5fa; text-decoration: none; border-bottom: 1px solid #60a5fa;">${car.vin.trim()}</a></div>` : ''}
                            </div>
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                <button class="btn-primary" onclick="addGeorgiaToCart(${index})" style="flex: 1;">
                                    <i class="fas fa-shopping-cart"></i> –ó–∞–∫–∞–∑–∞—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ –º–∞—Ä–æ–∫
        function populateGeorgiaBrandFilter() {
            const brandFilter = getGeorgiaElement('brandFilter');
            if (!brandFilter) return;
            
            const brands = [...new Set(georgiaCarsData.map(car => car.brand).filter(Boolean))].sort();
            brands.forEach(brand => {
                const option = document.createElement('option');
                option.value = brand;
                option.textContent = brand;
                brandFilter.appendChild(option);
            });
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function applyGeorgiaFilters() {
            const brand = getGeorgiaElement('brandFilter')?.value || '';
            const priceFrom = parseFloat(getGeorgiaElement('priceFrom')?.value) || 0;
            const priceTo = parseFloat(getGeorgiaElement('priceTo')?.value) || Infinity;
            const mileageTo = parseFloat(getGeorgiaElement('mileageTo')?.value) || Infinity;

            georgiaFilteredCars = georgiaCarsData.filter(car => {
                if (brand && car.brand !== brand) return false;
                if (car.price && (car.price < priceFrom || car.price > priceTo)) return false;
                if (car.mileage && car.mileage > mileageTo) return false;
                return true;
            });

            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: —Å–Ω–∞—á–∞–ª–∞ —Å VIN, –∑–∞—Ç–µ–º —Å —Ü–µ–Ω–æ–π
            georgiaFilteredCars.sort((a, b) => {
                const aHasVin = a.vin && a.vin.trim();
                const bHasVin = b.vin && b.vin.trim();
                const aHasPrice = a.price && a.price > 0;
                const bHasPrice = b.price && b.price > 0;
                
                if (aHasVin && !bHasVin) return -1;
                if (!aHasVin && bHasVin) return 1;
                if (aHasPrice && !bHasPrice) return -1;
                if (!aHasPrice && bHasPrice) return 1;
                return 0;
            });

            displayGeorgiaCars();
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
        window.addGeorgiaToCart = function(index) {
            const car = georgiaFilteredCars[index];
            if (!car) return;
            
            const cartItem = {
                id: car.id || `georgia-${index}`,
                brand: car.brand || '',
                model: car.model || '',
                price: car.price || 0,
                source: 'georgia',
                fullTitle: car.fullName || `${car.brand} ${car.model}`,
                url: car.url || ''
            };
            
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existingIndex = cart.findIndex(item => item.id === cartItem.id);
            
            if (existingIndex >= 0) {
                cart[existingIndex].quantity = (cart[existingIndex].quantity || 1) + 1;
            } else {
                cartItem.quantity = 1;
                cart.push(cartItem);
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
            const cartCount = document.getElementById('cartCount');
            if (cartCount) {
                const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
                cartCount.textContent = totalItems;
            }
            
            alert('–ê–≤—Ç–æ–º–æ–±–∏–ª—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!');
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        async function loadGeorgiaCarsData() {
            try {
                const response = await fetch('./cars_georgia_stock.json');
                if (response.ok) {
                    georgiaCarsData = await response.json();
                    georgiaFilteredCars = [...georgiaCarsData];
                    
                    // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
                    georgiaFilteredCars.sort((a, b) => {
                        const aHasVin = a.vin && a.vin.trim();
                        const bHasVin = b.vin && b.vin.trim();
                        const aHasPrice = a.price && a.price > 0;
                        const bHasPrice = b.price && b.price > 0;
                        
                        if (aHasVin && !bHasVin) return -1;
                        if (!aHasVin && bHasVin) return 1;
                        if (aHasPrice && !bHasPrice) return -1;
                        if (!aHasPrice && bHasPrice) return 1;
                        return 0;
                    });
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫—É—Ä—Å
                    await loadGeorgiaUsdToRubRate();
                    
                    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º
                    populateGeorgiaBrandFilter();
                    displayGeorgiaCars();
                    
                    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
                    const applyBtn = getGeorgiaElement('applyFilters');
                    if (applyBtn) {
                        applyBtn.addEventListener('click', applyGeorgiaFilters);
                    }
                } else {
                    const grid = getGeorgiaElement('carsGrid');
                    if (grid) {
                        grid.innerHTML = '<div class="no-results">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</div>';
                    }
                }
            } catch (error) {
                const grid = getGeorgiaElement('carsGrid');
                if (grid) {
                    grid.innerHTML = '<div class="no-results">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</div>';
                }
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            loadGeorgiaCarsData();
        });
    </script>
</body>
</html>
