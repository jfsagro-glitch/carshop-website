# üì• –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–º–ø–æ—Ä—Ç—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö –∏–∑ CSV —Ñ–∞–π–ª–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.

## üìã –§–æ—Ä–º–∞—Ç CSV —Ñ–∞–π–ª–∞

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|---------|
| `id` | Integer | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∞–≤—Ç–æ–º–æ–±–∏–ª—è | `1` |
| `brand` | String | –ë—Ä–µ–Ω–¥ –∞–≤—Ç–æ–º–æ–±–∏–ª—è | `Toyota` |
| `model` | String | –ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è | `Camry` |
| `year` | Integer | –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ | `2020` |
| `price` | Integer | –¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö | `2500000` |
| `mileage` | Integer | –ü—Ä–æ–±–µ–≥ –≤ –∫–º | `45000` |
| `fuel_type` | String | –¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞ | `–ë–µ–Ω–∑–∏–Ω` |
| `transmission` | String | –¢–∏–ø –ö–ü–ü | `–ê–≤—Ç–æ–º–∞—Ç` |
| `color` | String | –¶–≤–µ—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—è | `–ë–µ–ª—ã–π` |
| `description` | String | –û–ø–∏—Å–∞–Ω–∏–µ | `–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ` |
| `photos` | String | URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é | `url1,url2,url3` |

### –ü—Ä–∏–º–µ—Ä CSV —Ñ–∞–π–ª–∞

```csv
id,brand,model,year,price,mileage,fuel_type,transmission,color,description,photos
1,Toyota,Camry,2020,2500000,45000,–ë–µ–Ω–∑–∏–Ω,–ê–≤—Ç–æ–º–∞—Ç,–ë–µ–ª—ã–π,"–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ–¥–∏–Ω –≤–ª–∞–¥–µ–ª–µ—Ü","https://example.com/camry1.jpg,https://example.com/camry2.jpg"
2,BMW,X5,2019,4200000,62000,–ë–µ–Ω–∑–∏–Ω,–ê–≤—Ç–æ–º–∞—Ç,–ß–µ—Ä–Ω—ã–π,"–ü—Ä–µ–º–∏—É–º –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è","https://example.com/x5_1.jpg,https://example.com/x5_2.jpg"
```

## üöÄ –°–ø–æ—Å–æ–±—ã –∏–º–ø–æ—Ä—Ç–∞

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ `cars_data.csv` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ.

```bash
python run_bot.py
```

### 2. –†—É—á–Ω–æ–π –∏–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

```bash
python import_data.py
```

### 3. –ò–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É –±–æ—Ç–∞

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/import` –≤ Telegram –±–æ—Ç–µ.

### 4. –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–º–ø–æ—Ä—Ç

```python
from csv_importer import CarsCSVImporter

importer = CarsCSVImporter("cars_data.csv")
success = importer.import_to_database(clear_existing=True)
```

## üì∏ –†–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã URL

- HTTP/HTTPS —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –°—Å—ã–ª–∫–∏ –Ω–∞ –æ–±–ª–∞—á–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### –ü—Ä–∏–º–µ—Ä—ã URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

```
https://images.unsplash.com/photo-1621007947382-bb3c3994e3fb?w=800
https://example.com/car_photo.jpg
https://drive.google.com/file/d/123/view
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–∞–∫—Å–∏–º—É–º 5 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF, WebP
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 800x600 –ø–∏–∫—Å–µ–ª–µ–π

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–º–ø–æ—Ä—Ç–∞

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–ø–æ—Ä—Ç–∞

```python
importer = CarsCSVImporter(
    csv_file="cars_data.csv",  # –ü—É—Ç—å –∫ CSV —Ñ–∞–π–ª—É
    db_path="cars.db"          # –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
)

# –û—á–∏—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
success = importer.import_to_database(clear_existing=True)

# –î–æ–±–∞–≤–∏—Ç—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –¥–∞–Ω–Ω—ã–º
success = importer.import_to_database(clear_existing=False)
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º
errors = importer.validate_csv_data()
if errors:
    print("–ù–∞–π–¥–µ–Ω—ã –æ—à–∏–±–∫–∏:", errors)
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞

```python
stats = importer.get_import_statistics()
print(f"–í—Å–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π: {stats['total']}")
print(f"–ë—Ä–µ–Ω–¥—ã: {stats['brands']}")
print(f"–¶–µ–Ω—ã: {stats['price_range']['min']} - {stats['price_range']['max']}")
```

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

1. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç CSV**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ (–∑–∞–ø—è—Ç—ã–µ)
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ (UTF-8)

2. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (—á–∏—Å–ª–∞, —Å—Ç—Ä–æ–∫–∏)
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ª–æ–≥:

```bash
tail -f import.log
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–º–ø–æ—Ä—Ç–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```python
from csv_importer import CarsCSVImporter

importer = CarsCSVImporter()
stats = importer.get_import_statistics()

print(f"–°—Ç–∞—Ç—É—Å –∏–º–ø–æ—Ä—Ç–∞:")
print(f"  –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: {stats['total']}")
print(f"  –ë—Ä–µ–Ω–¥—ã: {', '.join(stats['brands'])}")
print(f"  –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω: {stats['price_range']['min']:,} - {stats['price_range']['max']:,} ‚ÇΩ")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
SELECT COUNT(*) FROM cars;

-- –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
SELECT brand, model, photos FROM cars WHERE photos != '[]';

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±—Ä–µ–Ω–¥–∞–º
SELECT brand, COUNT(*) as count FROM cars GROUP BY brand;
```

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏**
3. **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ ID**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π**

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç–∞–º–∏**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ**

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫**
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ**

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª–µ `import.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–∞ CSV
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ API

